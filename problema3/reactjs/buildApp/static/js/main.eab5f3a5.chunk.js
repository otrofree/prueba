(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{31:function(e,t,n){},81:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r,c,o,s,i,a,l,j,d,b,u,O,h,m,x,p=n(23),g=n(3),f=n.n(g),I=n(52),v=n.n(I),w=(n(81),n(38)),C=n.n(w),$=n(54),k=n(29),y=n(14),N=n(13),S=(n.p,n(31),n(22)),B=n(7),F=(n(32),n(5)),q=n(0),A=F.Form.Input,E=(F.Form.Field,F.Form.Control,F.Form.Label,Object(B.gql)(r||(r=Object(N.a)(["\n   query {\n\tallUser {\n      usuarioId\n      nombre\n      email\n      rol\n    }\n   }\n "])))),P=Object(B.gql)(c||(c=Object(N.a)(["\n mutation EditUser($email: String, $password: String, $rol: Int, $nombre: String, $usuarioId: Int!) {\n  editUser(usuarioId: $usuarioId, email: $email, password: $password, rol: $rol, nombre: $nombre) {\n    usuarioId\n    nombre\n    rol\n\temail\n  }\n}\n "]))),L=Object(B.gql)(o||(o=Object(N.a)(["\n\tmutation NewUser($email: String!, $nombre: String!, $password: String!, $rol: Int!) {\n\t\tnewUser(email: $email, nombre: $nombre, password: $password, rol: $rol) {\n\t\t\tusuarioId\n\t\t}\n\t}\n "]))),M=Object(B.gql)(s||(s=Object(N.a)(["\n\tmutation DelUser($usuarioId: Int!) {\n\t\tdelUser(usuarioId: $usuarioId) {\n\t\t\temail\n\t\t}\n\t}\n "]))),T=Object(S.withApollo)((function(e){var t=Object(B.useQuery)(E),n=(t.loading,t.error,t.data),r=t.refetch,c=Object(g.useState)(-1),o=Object(y.a)(c,2),s=o[0],i=o[1],a=Object(g.useState)(!1),l=Object(y.a)(a,2),j=l[0],d=l[1],b=Object(g.useState)({email:"",nombre:"",rol:"",password:"",usuarioId:-1}),u=Object(y.a)(b,2),O=u[0],h=u[1],m=function(e){var t=e.target;return h(Object(p.a)(Object(p.a)({},O),{},Object(k.a)({},t.name,t.value)))};function x(t){var n=function(e){var t="",n=!0;return""!==O.rol&&(O.rol=parseInt(O.rol),(O.rol>2||O.rol<0||isNaN(O.rol))&&(n=!1,t+=" El rol debe ser 0,1 o 2")),{edo:n,msgs:t}}();n.edo?(e.client.query({query:-1==t?L:P,variables:O}).then((function(e){void 0!==e.errors?console.log("error",e.errors[0].message):r()})),i(-1),d(!1)):console.log("Error de formulario",n.msgs)}function I(e){i(-1),d(!1)}return Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsx)("h1",{class:"title",children:"Administrar usuarios"}),Object(q.jsxs)(F.Section,{children:[Object(q.jsx)(F.Button,{rounded:!0,color:"primary",onClick:function(){return h({email:"",nombre:"",rol:"",password:"",usuarioId:-1}),void d(!0)},children:"Agregar"}),Object(q.jsxs)(F.Table,{children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Email"}),Object(q.jsx)("th",{children:"Nombre"}),Object(q.jsx)("th",{children:"Rol"}),Object(q.jsx)("th",{children:"Password"})]})}),Object(q.jsxs)("tbody",{children:[j&&Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"email",value:O.email,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"nombre",value:O.nombre,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"rol",value:O.rol,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"password",value:O.password,onChange:m,type:"password"})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){x(-1)},className:"fa fa-check"})})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){I()},className:"fa fa-times"})})})]}),n&&n.allUser.map((function(t,c){return s==c?Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"email",value:O.email,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"nombre",value:O.nombre,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"rol",value:O.rol,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(A,{name:"password",value:O.password,onChange:m,type:"password"})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){x(c)},className:"fa fa-check"})})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){I()},className:"fa fa-times"})})})]},c):Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:t.email}),Object(q.jsx)("td",{children:t.nombre}),Object(q.jsx)("td",{children:t.rol}),Object(q.jsx)("td",{}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){!function(e){var t=n.allUser[e];h({email:t.email,nombre:t.nombre,rol:t.rol,password:"",usuarioId:t.usuarioId}),i(e)}(c)},className:"fa fa-edit"})})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){!function(t){e.client.query({query:M,variables:{usuarioId:n.allUser[t].usuarioId}}).then((function(e){void 0!==e.errors?console.log("error",e.errors[0].message):r()}))}(c)},className:"fa fa-trash"})})})]},c)}))]})]})]})]})})),U=F.Form.Input,Q=(F.Form.Field,F.Form.Control,F.Form.Label,Object(B.gql)(i||(i=Object(N.a)(["\n   query {\n\tallBook {\n      libroId\n      titulo\n      autor\n      editorial\n\t  sinopsis\n\t  edicion\n    }\n   }\n "])))),R=Object(B.gql)(a||(a=Object(N.a)(["\n\t mutation EditBook($titulo: String, $autor: String, $editorial: String, $sinopsis: String,$edicion: String, $libroId: Int!) {\n\t  editBook(libroId: $libroId, titulo: $titulo, autor: $autor, editorial: $editorial, sinopsis: $sinopsis, edicion:$edicion) {\n\t\tlibroId\n\t  }\n\t }\n "]))),z=Object(B.gql)(l||(l=Object(N.a)(["\n\t mutation NewBook($titulo: String!, $autor: String!, $editorial: String!, $sinopsis: String,$edicion: String) {\n\t  newBook(titulo: $titulo, autor: $autor, editorial: $editorial, sinopsis: $sinopsis, edicion:$edicion) {\n\t\tlibroId\n\t  }\n\t }\n "]))),H=Object(B.gql)(j||(j=Object(N.a)(["\n\tmutation deleteBook($libroId: Int!) {\n\t\tdeleteBook(libroId: $libroId) {\n\t\t\tlibroId\n\t\t}\n\t}\n "]))),J=Object(S.withApollo)((function(e){var t=Object(B.useQuery)(Q),n=(t.loading,t.error,t.data),r=t.refetch,c=Object(g.useState)(-1),o=Object(y.a)(c,2),s=o[0],i=o[1],a=Object(g.useState)(!1),l=Object(y.a)(a,2),j=l[0],d=l[1],b=Object(g.useState)({titulo:"",autor:"",editorial:"",sinopsis:"",edicion:"",libroId:-1}),u=Object(y.a)(b,2),O=u[0],h=u[1],m=function(e){var t=e.target;return h(Object(p.a)(Object(p.a)({},O),{},Object(k.a)({},t.name,t.value)))};function x(t){var n=function(e){var t="",n=!0;return""===O.autor.trim()&&(n=!1,t+=" \n El campo autor no puede ser nulo"),""===O.titulo.trim()&&(n=!1,t+=" \n El campo titulo no puede ser nulo"),""===O.editorial.trim()&&(n=!1,t+=" \n El campo editoria no puede ser nulo"),{edo:n,msgs:t}}();n.edo?(e.client.query({query:-1==t?z:R,variables:O}).then((function(e){void 0!==e.errors?console.log("error",e.errors[0].message):r()})),i(-1),d(!1)):console.log("error de formulario",n.msgs)}function I(e){i(-1),d(!1)}return Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsx)("h1",{class:"title",children:"Administrar libros"}),Object(q.jsxs)(F.Section,{children:[Object(q.jsx)(F.Button,{rounded:!0,color:"primary",onClick:function(){return h({titulo:"",autor:"",editorial:"",sinopsis:"",edicion:"",libroId:-1}),void d(!0)},children:"Agregar"}),Object(q.jsxs)(F.Table,{children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Titulo"}),Object(q.jsx)("th",{children:"Autor"}),Object(q.jsx)("th",{children:"Editorial"}),Object(q.jsx)("th",{children:"Sinopsis"}),Object(q.jsx)("th",{children:"Edicion"})]})}),Object(q.jsxs)("tbody",{children:[j&&Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"titulo",value:O.titulo,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"autor",value:O.autor,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"editorial",value:O.editorial,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"sinopsis",value:O.sinopsis,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"edicion",value:O.edicion,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){x(-1)},className:"fa fa-check"})})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){I()},className:"fa fa-times"})})})]}),n&&n.allBook.map((function(t,c){return s==c?Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"titulo",value:O.titulo,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"autor",value:O.autor,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"editorial",value:O.editorial,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"sinopsis",value:O.sinopsis,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)(U,{name:"edicion",value:O.edicion,onChange:m})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){x(c)},className:"fa fa-check"})})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){I()},className:"fa fa-times"})})})]},c):Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:t.titulo}),Object(q.jsx)("td",{children:t.autor}),Object(q.jsx)("td",{children:t.editorial}),Object(q.jsx)("td",{children:t.sinopsis}),Object(q.jsx)("td",{children:t.edicion}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){!function(e){var t=n.allBook[e];h({titulo:t.titulo,autor:t.autor,editorial:t.editorial,sinopsis:t.sinopsis,edicion:t.edicion,libroId:t.libroId}),i(e)}(c)},className:"fa fa-edit"})})}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){!function(t){e.client.query({query:H,variables:{libroId:n.allBook[t].libroId}}).then((function(e){void 0!==e.errors?console.log("error",e.errors[0].message):r()}))}(c)},className:"fa fa-trash"})})})]},c)}))]})]})]})]})})),D=(F.Form.Input,F.Form.Field,F.Form.Control,F.Form.Label,Object(B.gql)(d||(d=Object(N.a)(["\n   query {\n\tallBook {\n      libroId\n      titulo\n      autor\n      editorial\n\t  sinopsis\n\t  edicion\n    }\n   }\n "])))),G=Object(B.gql)(b||(b=Object(N.a)(["\n\t mutation newBorrow($usuarioId: Int!, $libroId: Int!) {\n\t  newBorrow(libroId: $libroId, usuarioId: $usuarioId) {\n\t\tprestamoId\n\t  }\n\t }\n "]))),K=Object(S.withApollo)((function(e){var t=Object(B.useQuery)(D),n=(t.loading,t.error,t.data),r=t.refetch;return Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsx)("h1",{class:"title",children:"Libros existentes"}),Object(q.jsx)(F.Section,{children:Object(q.jsxs)(F.Table,{children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Titulo"}),Object(q.jsx)("th",{children:"Autor"}),Object(q.jsx)("th",{children:"Editorial"}),Object(q.jsx)("th",{children:"Sinopsis"}),Object(q.jsx)("th",{children:"Edicion"})]})}),Object(q.jsx)("tbody",{children:n&&n.allBook.map((function(t,c){return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:t.titulo}),Object(q.jsx)("td",{children:t.autor}),Object(q.jsx)("td",{children:t.editorial}),Object(q.jsx)("td",{children:t.sinopsis}),Object(q.jsx)("td",{children:t.edicion}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){!function(t){e.client.query({query:G,variables:{libroId:n.allBook[t].libroId,usuarioId:e.usuarioId}}).then((function(t){void 0!==t.errors?console.log("error",t.errors[0].message):(r(),e.updatePrestamo())}))}(c)},className:"fa fa-book"})})})]},c)}))})]})})]})})),V=(F.Form.Input,F.Form.Field,F.Form.Control,F.Form.Label,Object(B.gql)(u||(u=Object(N.a)(["\n\t query MyBorrow($usuarioId:Int!){\n\t  myBorrow(usuarioId:$usuarioId)  {\n\t\tlibro { titulo }\n\t\testado\n\t  }\n\t}\n "])))),W={0:"Pendiente",1:"Aprobado",2:"Regresado"},X=Object(S.withApollo)((function(e){var t=Object(B.useQuery)(V,{variables:{usuarioId:e.usuarioId}}),n=(t.loading,t.error,t.data),r=t.refetch,c=0;return Object(g.useEffect)((function(){c!=e.update&&(c=e.update,r())})),Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsx)("h1",{class:"title",children:"Mis prestamos"}),Object(q.jsx)(F.Section,{children:Object(q.jsxs)(F.Table,{children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Titulo"}),Object(q.jsx)("th",{children:"Edo. Prestamo"})]})}),Object(q.jsx)("tbody",{children:n&&n.myBorrow.map((function(e,t){return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:e.libro.titulo}),Object(q.jsx)("td",{children:W[e.estado]})]},t)}))})]})})]})})),Y=(F.Form.Input,F.Form.Field,F.Form.Control,F.Form.Label,Object(B.gql)(O||(O=Object(N.a)(["\n\tquery AllBorrow($estado:Int!){\n\t\tallBorrow(estado:$estado){\n\t\t\tprestamoId\n\t\t\testado\n\t\t\tlibro {\n\t\t\t\ttitulo\n\t\t\t}\n\t\t  }\n\t}\n "])))),Z=Object(B.gql)(h||(h=Object(N.a)(["\n\t mutation ConfirmBorrow($prestamoId:Int!){\n\t\tconfirmBorrow(prestamoId:$prestamoId){\n\t\t\tmsg\n\t\t  }\n\t}\n "]))),_=Object(B.gql)(m||(m=Object(N.a)(["\n\t mutation ReturnBorrow($prestamoId:Int!){\n\t\treturnBorrow(prestamoId:$prestamoId){\n\t\t\tmsg\n\t\t  }\n\t}\n "]))),ee={0:"Pendiente",1:"Aprobado",2:"Regresado"},te=Object(S.withApollo)((function(e){var t=Object(g.useState)(-1),n=Object(y.a)(t,2),r=n[0],c=n[1],o=Object(B.useQuery)(Y,{variables:{estado:r}}),s=(o.loading,o.error,o.data),i=o.refetch;function a(t){switch(t.estado){case 0:n=t.prestamoId,e.client.query({query:Z,variables:{prestamoId:n}}).then((function(e){void 0!==e.errors?console.log("error",e.errors[0].message):i()}));break;case 1:!function(t){e.client.query({query:_,variables:{prestamoId:t}}).then((function(e){void 0!==e.errors?console.log("error",e.errors[0].message):i()}))}(t.prestamoId)}var n}function l(e){switch(e){case 0:return"fa fa-check";case 1:return"fa fa-undo"}}return Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsxs)("h1",{className:"title",children:[" Prestamos ",e.update]}),Object(q.jsx)("div",{className:"select is-primary",children:Object(q.jsxs)("select",{onChange:function(e){return function(e){c(parseInt(e.target.value)),i()}(e)},children:[Object(q.jsx)("option",{selected:!0,value:"0",children:"Pendientes"}),Object(q.jsx)("option",{value:"1",children:"Aprobados"}),Object(q.jsx)("option",{value:"2",children:"Regresados"})]})}),Object(q.jsx)(F.Section,{children:Object(q.jsxs)(F.Table,{children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{children:"Titulo"}),Object(q.jsx)("th",{children:"Edo. Prestamo"})]})}),Object(q.jsx)("tbody",{children:s&&s.allBorrow.map((function(e,t){return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{children:e.libro.titulo}),Object(q.jsx)("td",{children:ee[e.estado]}),Object(q.jsx)("td",{children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{onClick:function(){a(e)},className:l(e.estado)})})})]},t)}))})]})})]})})),ne=F.Form.Input,re=F.Form.Field,ce=F.Form.Control,oe=F.Form.Label,se=Object(B.gql)(x||(x=Object(N.a)(["\n  mutation Login($email: String!, $password: String!) {\n\tlogin(email:$email, password: $password) {\n\t\ttoken\n\t\tusuario {\n\t\t\tusuarioId\n\t\t\tnombre\n\t\t\trol\n\t\t}\n    }\n  }\n"])));function ie(e){var t=Object(g.useState)({email:"",password:""}),n=Object(y.a)(t,2),r=n[0],c=n[1],o=function(e){var t=e.target;return c(Object(p.a)(Object(p.a)({},r),{},Object(k.a)({},t.name,t.value)))};return Object(q.jsx)(f.a.Fragment,{children:Object(q.jsx)("div",{className:"container is-fluid",children:Object(q.jsx)("section",{"data-section-id":"1","data-category":"sign-in",className:"section",children:Object(q.jsx)("div",{className:"container has-text-centered",children:Object(q.jsx)("div",{className:"columns is-centered",children:Object(q.jsxs)("div",{className:"column is-5 is-4-desktop",children:[Object(q.jsx)(re,{children:Object(q.jsxs)(ce,{children:[Object(q.jsx)(oe,{children:"Email"}),Object(q.jsx)(ne,{name:"email",value:r.email,onChange:o})]})}),Object(q.jsx)(re,{children:Object(q.jsxs)(ce,{children:[Object(q.jsx)(oe,{children:"Password"}),Object(q.jsx)(ne,{name:"password",type:"password",value:r.password,onChange:o})]})}),Object(q.jsx)(F.Button.Group,{children:Object(q.jsx)(F.Button,{fullwidth:!0,rounded:!0,color:"primary",onClick:function(){return e.login(r)},children:"Login"})})]})})})})})})}function ae(e){return Object(q.jsx)(F.Modal,{show:e.show,onClose:e.onClose,children:Object(q.jsxs)(F.Modal.Card,{children:[Object(q.jsx)(F.Modal.Card.Head,{children:Object(q.jsx)(F.Modal.Card.Title,{children:"Error"})}),Object(q.jsx)(F.Modal.Card.Body,{children:Object(q.jsxs)(F.Media,{children:[Object(q.jsx)(F.Media.Item,{renderAs:"figure",position:"left",children:Object(q.jsx)(F.Image,{size:64,alt:"64x64",src:"http://bulma.io/images/placeholders/128x128.png"})}),Object(q.jsx)(F.Media.Item,{children:Object(q.jsx)(F.Content,{children:Object(q.jsx)("p",{children:e.msg})})})]})}),Object(q.jsx)(F.Modal.Card.Foot,{style:{alignItems:"center",justifyContent:"center"},children:Object(q.jsx)("p",{children:Object(q.jsx)(F.Button,{fullwidth:!0,rounded:!0,color:"primary",onClick:e.onClose,children:"Cerrar"})})})]})})}function le(e){var t=Object(g.useState)(""),n=Object(y.a)(t,2),r=n[0],c=n[1];return Object(q.jsx)(F.Level,{children:Object(q.jsx)(F.Level.Item,{children:Object(q.jsxs)(re,{kind:"addons",children:[Object(q.jsx)(ce,{children:Object(q.jsx)(ne,{name:"busqueda",value:r,onChange:function(e){var t=e.target;return c(t.value)}})}),Object(q.jsx)(ce,{children:Object(q.jsx)(F.Button,{fullwidth:!0,rounded:!0,color:"primary",onClick:function(){return e.search(r)},children:Object(q.jsx)("span",{className:"icon",children:Object(q.jsx)("i",{className:"fa fa-search"})})})})]})})})}Object(S.withApollo)((function(e){function t(){return(t=Object($.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsx)("h1",{className:"title",children:"Busqueda de libros"}),Object(q.jsx)(le,{search:function(e){return t.apply(this,arguments)}}),Object(q.jsx)("div",{children:" OK "})]})}));function je(e){var t=Object(g.useState)(0),n=Object(y.a)(t,2),r=n[0],c=n[1],o=function(){return c(r+1)};return Object(q.jsxs)(F.Container,{children:[Object(q.jsxs)("h1",{className:"title",children:[" Bienvenido al portal de ",["Administador","Bibliotecario","Lector"][parseInt(e.rol)]]}),Object(q.jsxs)(F.Columns,{children:[Object(q.jsx)(F.Columns.Column,{children:Object(q.jsx)(F.Notification,{children:function(){switch(parseInt(e.rol)){case 0:return Object(q.jsx)(J,{});case 1:return Object(q.jsx)(te,{});case 2:return Object(q.jsx)(K,{rol:e.rol,usuarioId:e.usuarioId,updatePrestamo:o});default:return Object(q.jsx)("div",{})}}()})}),function(){switch(parseInt(e.rol)){case 0:return Object(q.jsx)(F.Columns.Column,{children:Object(q.jsx)(F.Notification,{color:"info",children:Object(q.jsx)(T,{})})});case 1:return Object(q.jsx)("div",{});case 2:return Object(q.jsx)(F.Columns.Column,{children:Object(q.jsx)(F.Notification,{color:"info",children:Object(q.jsx)(X,{rol:e.rol,usuarioId:e.usuarioId,update:r})})});default:return Object(q.jsx)("div",{})}}()]})]})}var de=function(){var e=Object(g.useState)(""),t=Object(y.a)(e,2),n=t[0],r=t[1],c=Object(g.useState)(0),o=Object(y.a)(c,2),s=o[0],i=o[1],a=Object(g.useState)(null===localStorage.getItem("rol")?3:localStorage.getItem("rol")),l=Object(y.a)(a,2),j=l[0],d=l[1],b=Object(g.useState)(null!==localStorage.getItem("token")),u=Object(y.a)(b,2),O=u[0],h=u[1],m=Object(g.useState)({show:!1,msg:""}),x=Object(y.a)(m,2),p=x[0],I=x[1],v=f.a.useState(!1),w=Object(y.a)(v,2),k=w[0],N=w[1],S=Object(B.useMutation)(se),A=Object(y.a)(S,2),E=A[0],P=A[1];function L(){return(L=Object($.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==t.email&&""!==t.password){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E({variables:{email:t.email,password:t.password}});case 5:n=e.sent;try{localStorage.setItem("token",n.data.login.token),localStorage.setItem("rol",n.data.login.usuario.rol),h(!0),i(n.data.login.usuario.usuarioId),r(n.data.login.usuario.nombre),d(n.data.login.usuario.rol)}catch(c){}e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h(!1),I({show:!0,msg:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return P.data,P.loading,P.error,Object(q.jsxs)(f.a.Fragment,{children:[Object(q.jsxs)(F.Navbar,{fixed:"top",children:[Object(q.jsxs)(F.Navbar.Brand,{children:[Object(q.jsx)(F.Navbar.Item,{renderAs:"a",href:"#",children:Object(q.jsx)("img",{src:"https://bulma.io/images/bulma-logo.png",alt:"Bulma: a modern CSS framework based on Flexbox",width:"112",height:"28"})}),Object(q.jsx)(F.Navbar.Burger,{"data-target":"navbarBasicExample",className:"navbar-burger burger ".concat(k?"is-active":""),onClick:function(){N(!k)}})]}),Object(q.jsx)(F.Navbar.Menu,{id:"navbarBasicExample",className:"navbar-menu ".concat(k?"is-active":""),children:Object(q.jsxs)(F.Navbar.Container,{position:"end",children:[Object(q.jsx)(F.Navbar.Item,{href:"#",children:O&&n||""}),Object(q.jsx)(F.Navbar.Item,{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("rol"),h(!1),r(""),d(3)},href:"#",children:"Logout"})]})})]}),O?Object(q.jsx)(je,{rol:j,usuarioId:s}):Object(q.jsx)(ie,{login:function(e){return L.apply(this,arguments)}}),Object(q.jsx)(ae,{show:p.show,onClose:function(){I({show:!1,msg:""})},msg:p.msg})]})},be=n(76),ue=Object(B.createHttpLink)({uri:"http://localhost:4000/graphql"}),Oe=Object(be.a)((function(e,t){var n=t.headers,r=localStorage.getItem("token");return{headers:Object(p.a)(Object(p.a)({},n),{},{authorization:r?"Bearer ".concat(r):""})}})),he=new B.ApolloClient({cache:new B.InMemoryCache,link:Oe.concat(ue),defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});v.a.render(Object(q.jsx)(B.ApolloProvider,{client:he,children:Object(q.jsx)(de,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.eab5f3a5.chunk.js.map